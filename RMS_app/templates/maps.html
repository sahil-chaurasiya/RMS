{% extends "base.html" %}

{% block body %}
<style>
  /* Main content fits remaining area after sidebar, header, and footer */
  .main-content {
    margin-top: 40px;       /* height of header */
    margin-left: 220px;    /* height of footer */
    padding: 24px;
    width: 100%;
  }

  .card {
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.1);
    margin-bottom: 24px;
  }

  .card-body {
    padding: 20px;
  }

  h2,
  h5 {
    color: #343a40;
  }
  p {
    color: #495057;
  }

/* Responsive 16:7 ratio container for embedded map */
.ratio-16x7 {
  position: relative;
  width: 100%;
  padding-bottom: 43.75%; /* 7 / 16 = 0.4375 */
  height: 0;
  overflow: hidden;
  border-radius: 12px;
}

.ratio-16x7 iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 0;
}


</style>

<main class="main-content">
  <div class="card shadow-sm">
    <div class="card-body">
      <h5 class="card-title">Site Locations</h5>
      <p class="card-text">Below is the map displaying your site locations.</p>
      <!-- Responsive Google Maps Embed -->
      <div class="ratio-16x7">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14699.29616134627!2d77.4080552!3d23.2599337!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x397c4331d8dfe84b%3A0x88aabca5c39e4d47!2sBhopal%2C%20Madhya%20Pradesh!5e0!3m2!1sen!2sin!4v1699999999999!5m2!1sen!2sin"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
          aria-hidden="false"
          tabindex="0"
        ></iframe>
      </div>
    </div>
  </div>
</main>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const links = document.querySelectorAll(".sidebar .nav-link");
    let currentPath = window.location.pathname;

    if (currentPath.length > 1 && currentPath.endsWith("/")) {
      currentPath = currentPath.slice(0, -1);
    }

    links.forEach((link) => {
      let linkPath = link.getAttribute("href");
      if (linkPath.length > 1 && linkPath.endsWith("/")) {
        linkPath = linkPath.slice(0, -1);
      }

      // Highlight if exact match or subpath (e.g., /maps/site1)
      if (currentPath === linkPath || currentPath.startsWith(linkPath + "/")) {
        link.classList.add("active");
      } else {
        link.classList.remove("active");
      }
    });
  });
</script>
{% endblock body %}
