<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Shroti Telecom Pvt. Ltd. Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        background-color: #eef3f7;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
      }

      /* Fixed header (top-bar) */
      .top-bar {
        background: #233344;
        color: #fff;
        padding: 12px 24px;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 56px;
        z-index: 1050;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      /* Fixed sidebar */
      .sidebar {
        position: fixed;
        top: 56px; /* height of top-bar */
        left: 0;
        bottom: 40px; /* height of footer */
        width: 220px;
        background: #233344;
        color: #fff;
        overflow-y: auto;
        padding: 1rem;
        z-index: 1040;
      }

      .sidebar a,
      .sidebar .nav-link {
        color: #fff;
      }

      .sidebar .nav-link.active {
        background: #39506d;
      }

      /* Fixed footer */
      footer {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: 40px;
        background-color: #233344;
        z-index: 1050;
        padding: 10px 0;
        text-align: center;
        color: #fff;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <div class="top-bar">
      <div>
        <strong>Shroti Telecom Pvt. Ltd.</strong>
      </div>
      <div>
        <i class="bi bi-person"></i> <span class="fw-bold">Super Admin</span>
      </div>
    </div>

    <div class="d-flex">
      <nav class="sidebar">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/analytics">NOC Analytics</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/energy">Energy</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/battery">Battery</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/grid_billing">Grid Billing</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/maps">Maps</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/reports">Reports</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/useradmin">Admin</a>
          </li>
        </ul>
      </nav>

      {% block body %}{% endblock body %}
    </div>

    <footer>
      &copy; 2020-2025 Shroti Telecom Pvt. Ltd. All Rights Reserved.
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const links = document.querySelectorAll(".sidebar .nav-link");
        let currentPath = window.location.pathname;

        // remove trailing slash if not root
        if (currentPath.length > 1 && currentPath.endsWith("/")) {
          currentPath = currentPath.slice(0, -1);
        }

        links.forEach((link) => {
          let linkPath = link.getAttribute("href");

          // normalize link path too
          if (linkPath.length > 1 && linkPath.endsWith("/")) {
            linkPath = linkPath.slice(0, -1);
          }

          if (linkPath === currentPath) {
            link.classList.add("active");
          } else {
            link.classList.remove("active");
          }
        });
      });
    </script>
  </body>
</html>
